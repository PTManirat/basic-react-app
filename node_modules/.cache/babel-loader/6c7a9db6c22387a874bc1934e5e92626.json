{"ast":null,"code":"import _objectSpread from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{useParams}from'react-router-dom';import axios from'axios';import{Container,Form,Button,Row,Col}from'react-bootstrap';import{useForm}from\"react-hook-form\";import{yupResolver}from'@hookform/resolvers/yup';import*as yup from\"yup\";import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var schema=yup.object().shape({newsCatename:yup.string().required('Name news category is required!')});var EditPage=function EditPage(){var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,setValue=_useForm.setValue;// const getData = async (id) => {\n//     try{\n//         const res = await axios.get('https://api.codingthailand.com/api/category/' + id)\n//         setValue('newsCatename', res.data.name)\n//         setValue('newsCateId', res.data.id)\n//     }catch(error) {\n//         console.log(error)\n//     }\n// }\n// React.useEffect(() => { \n//     getData(id)\n// },[id])\n//useCallback\nvar getData=React.useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('https://api.codingthailand.com/api/category/'+id);case 3:res=_context.sent;setValue('newsCatename',res.data.name);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[id,setValue]);React.useEffect(function(){getData();},[getData]);var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var apiUrl,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:apiUrl='https://api.codingthailand.com/api/category';_context2.next=3;return axios.put(apiUrl,{id:id,name:data.newsCatename});case 3:res=_context2.sent;alert(res.data.message);history.replace('/category');case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{xs:12,md:6,children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"newsCatename\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"News Category\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread(_objectSpread({type:\"text\"},register(\"newsCatename\")),{},{placeholder:\"Enter news category name.\",isInvalid:errors.newsCatename})),errors.newsCatename&&/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:errors.newsCatename.message})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Submit\"})]})})}),/*#__PURE__*/_jsx(\"hr\",{})]});};export default EditPage;","map":{"version":3,"sources":["D:/reactPractice/create_react_app/my-app/src/pages/category/EditPage.js"],"names":["React","useParams","axios","Container","Form","Button","Row","Col","useForm","yupResolver","yup","useHistory","schema","object","shape","newsCatename","string","required","EditPage","id","history","resolver","register","handleSubmit","errors","formState","setValue","getData","useCallback","get","res","data","name","console","log","useEffect","onSubmit","apiUrl","put","alert","message","replace"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { Container, Form, Button, Row, Col } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from \"yup\";\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst schema = yup.object().shape({\r\n    newsCatename: yup.string().required('Name news category is required!')\r\n});\r\n\r\nconst EditPage = () => {\r\n\r\n    const { id } = useParams()\r\n    const history = useHistory()\r\n\r\n    const { register, handleSubmit, formState:{ errors }, setValue } = useForm({\r\n        resolver: yupResolver(schema)\r\n    });\r\n\r\n    // const getData = async (id) => {\r\n    //     try{\r\n    //         const res = await axios.get('https://api.codingthailand.com/api/category/' + id)\r\n    //         setValue('newsCatename', res.data.name)\r\n    //         setValue('newsCateId', res.data.id)\r\n    //     }catch(error) {\r\n    //         console.log(error)\r\n    //     }\r\n    // }\r\n\r\n    // React.useEffect(() => { \r\n    //     getData(id)\r\n    // },[id])\r\n\r\n    //useCallback\r\n    const getData = React.useCallback(async () => {\r\n        try{\r\n            const res = await axios.get('https://api.codingthailand.com/api/category/' + id)\r\n            setValue('newsCatename', res.data.name)\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    },[id, setValue]) \r\n\r\n    React.useEffect(() => { \r\n        getData()\r\n    },[getData])\r\n\r\n    const onSubmit = async (data) => {\r\n        const apiUrl = 'https://api.codingthailand.com/api/category'\r\n\r\n        const res = await axios.put(apiUrl,{\r\n            id: id,\r\n            name : data.newsCatename\r\n        })\r\n\r\n        alert(res.data.message)\r\n        history.replace('/category')\r\n    }\r\n\r\n    return (\r\n        <Container className=\"mt-4\">\r\n            <Row>\r\n                <Col xs={12} md={6}>\r\n                    <Form onSubmit={handleSubmit(onSubmit)}>\r\n                     \r\n                        <Form.Group controlId=\"newsCatename\">\r\n                            <Form.Label>News Category</Form.Label>\r\n                            <Form.Control \r\n                                type=\"text\" \r\n                                {...register(\"newsCatename\")} \r\n                                placeholder=\"Enter news category name.\" \r\n                                isInvalid={errors.newsCatename}\r\n                            />\r\n                            {\r\n                                errors.newsCatename && (\r\n                                    <Form.Control.Feedback type=\"invalid\">\r\n                                        {errors.newsCatename.message}\r\n                                    </Form.Control.Feedback>\r\n                                )\r\n                            }\r\n                        </Form.Group>\r\n\r\n                        <Button variant=\"primary\" type=\"submit\">\r\n                            Submit\r\n                        </Button>\r\n\r\n                    </Form>\r\n                </Col>\r\n            </Row>\r\n            <hr />\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default EditPage\r\n"]},"metadata":{},"sourceType":"module"}