{"ast":null,"code":"import _regeneratorRuntime from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Pagination from'react-js-pagination';import axios from'axios';import{Spinner,Table}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var pageSize=10;var HospitalPage=function HospitalPage(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),hospital=_React$useState2[0],setHospital=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),loading=_React$useState4[0],setLoading=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),error=_React$useState6[0],setError=_React$useState6[1];var cancelToken=React.useRef(null);//Pagination\nvar _React$useState7=React.useState(1),_React$useState8=_slicedToArray(_React$useState7,2),page=_React$useState8[0],setPage=_React$useState8[1];var _React$useState9=React.useState(0),_React$useState10=_slicedToArray(_React$useState9,2),total=_React$useState10[0],setTotal=_React$useState10[1];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.get(\"https://api.codingthailand.com/api/hospital2?page=\".concat(page,\"&page_size=\").concat(pageSize),{cancelToken:cancelToken.current.token});case 4:res=_context.sent;setHospital(res.data.data);setTotal(res.data.meta.pagination.total);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setError(_context.t0);case 12:_context.prev=12;setLoading(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,9,12,15]]);}));return function getData(_x){return _ref.apply(this,arguments);};}();React.useEffect(function(){cancelToken.current=axios.CancelToken.source();getData(page);return function(){cancelToken.current.cancel();};},[page]);if(loading===true){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-5\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Have a problem from server,please try again.\"}),/*#__PURE__*/_jsx(\"p\",{children:error.response.data.message})]});}var handlePageChange=function handlePageChange(pageNumber){setPage(pageNumber);};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Hospital Lists\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Hospital Name\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:hospital.map(function(h,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:h.id}),/*#__PURE__*/_jsx(\"td\",{children:h.code}),/*#__PURE__*/_jsx(\"td\",{children:h.h_name})]},h.id);})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Pagination,{activePage:page,itemsCountPerPage:pageSize,totalItemsCount:total,pageRangeDisplayed:10,onChange:handlePageChange,itemClass:\"page-item\",linkClass:\"page-link\"// firstPageText=\"first\"\n// lastPageText=\"last\"\n,prevPageText:\"previous\",nextPageText:\"next\"})]})})});};export default HospitalPage;","map":{"version":3,"sources":["D:/reactPractice/create_react_app/my-app/src/pages/hospital/HospitalPage.js"],"names":["React","Pagination","axios","Spinner","Table","pageSize","HospitalPage","useState","hospital","setHospital","loading","setLoading","error","setError","cancelToken","useRef","page","setPage","total","setTotal","getData","get","current","token","res","data","meta","pagination","useEffect","CancelToken","source","cancel","response","message","handlePageChange","pageNumber","map","h","index","id","code","h_name"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Pagination from 'react-js-pagination'\r\nimport axios from 'axios'\r\nimport { Spinner, Table } from 'react-bootstrap'\r\n\r\nconst pageSize = 10\r\n\r\nconst HospitalPage = () => {\r\n\r\n    const [hospital, setHospital] = React.useState([])\r\n    const [loading, setLoading] = React.useState(false)\r\n    const [error, setError] = React.useState(null)\r\n    const cancelToken = React.useRef(null)\r\n\r\n    //Pagination\r\n    const [page, setPage] = React.useState(1)\r\n    const [total, setTotal] = React.useState(0)\r\n\r\n    const getData = async (page) => {\r\n        try {\r\n            setLoading(true)\r\n            const res = await axios.get(\r\n                `https://api.codingthailand.com/api/hospital2?page=${page}&page_size=${pageSize}`,{\r\n                    cancelToken: cancelToken.current.token  \r\n                }\r\n            )\r\n            setHospital(res.data.data)\r\n            setTotal(res.data.meta.pagination.total)\r\n        } catch (error){\r\n            setError(error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n\r\n        cancelToken.current = axios.CancelToken.source()\r\n        getData(page)\r\n\r\n        return () =>  {\r\n            cancelToken.current.cancel()\r\n        }\r\n\r\n    },[page])\r\n\r\n    if(loading === true){\r\n        return(\r\n            <div className=\"text-center mt-5\">\r\n                <Spinner animation=\"border\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"text-center mt-5\">\r\n                <p>Have a problem from server,please try again.</p>\r\n                <p>{error.response.data.message}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const handlePageChange = (pageNumber) => {\r\n        setPage(pageNumber)\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row mt-5\">\r\n                <div className=\"col-md-12\">\r\n                    <h2>Hospital Lists</h2>\r\n                    <Table striped bordered hover size=\"sm\" className=\"mt-4\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>Code</th>\r\n                                <th>Hospital Name</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                               hospital.map((h, index) => {\r\n                                    return (\r\n                                        <tr key={h.id}>\r\n                                            <td>{h.id}</td>\r\n                                            <td>{h.code}</td>\r\n                                            <td>{h.h_name}</td>\r\n                                        </tr>\r\n                                    )\r\n                               }) \r\n                            }\r\n                        </tbody>\r\n                    </Table>\r\n                    <br />\r\n                    <Pagination\r\n                        activePage={page}\r\n                        itemsCountPerPage={pageSize}\r\n                        totalItemsCount={total}\r\n                        pageRangeDisplayed={10}\r\n                        onChange={handlePageChange}\r\n                        itemClass=\"page-item\"\r\n                        linkClass=\"page-link\"\r\n                        // firstPageText=\"first\"\r\n                        // lastPageText=\"last\"\r\n                        prevPageText=\"previous\"\r\n                        nextPageText=\"next\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HospitalPage\r\n"]},"metadata":{},"sourceType":"module"}