{"ast":null,"code":"import _regeneratorRuntime from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/reactPractice/create_react_app/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useParams,useHistory}from\"react-router-dom\";import axios from'axios';import{CardDeck,Card,Spinner,Button}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DetailPage=function DetailPage(){var _useParams=useParams(),id=_useParams.id,title=_useParams.title;var history=useHistory();var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),detail=_React$useState2[0],setDetail=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),loading=_React$useState4[0],setLoading=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),error=_React$useState6[0],setError=_React$useState6[1];var cancelToken=React.useRef(null);var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.get('https://api.codingthailand.com/api/course/'+id,{cancelToken:cancelToken.current.token});case 4:res=_context.sent;setDetail(res.data.data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);// console.log(error)\nsetError(_context.t0);case 11:_context.prev=11;setLoading(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,8,11,14]]);}));return function getData(_x){return _ref.apply(this,arguments);};}();React.useEffect(function(){cancelToken.current=axios.CancelToken.source();getData(id);return function(){// console.log('exit')\ncancelToken.current.cancel();};},[id]);if(loading===true){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-5\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Have a problem from server,please try again.\"}),/*#__PURE__*/_jsx(\"p\",{children:error.response.data.message})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(){history.goBack();},children:\"Back\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[title,\" - \",id]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-4\",children:detail.length>0?/*#__PURE__*/_jsx(CardDeck,{children:detail.map(function(d,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(Card,{className:\"mb-4 shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:d.ch_title}),/*#__PURE__*/_jsx(Card.Text,{children:d.ch_dateadd})]})})},d.ch_id);})}):/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto\",children:\"Not found data ...\"})}),/*#__PURE__*/_jsx(\"hr\",{})]})})});};export default DetailPage;","map":{"version":3,"sources":["D:/reactPractice/create_react_app/my-app/src/pages/DetailPage.js"],"names":["React","useParams","useHistory","axios","CardDeck","Card","Spinner","Button","DetailPage","id","title","history","useState","detail","setDetail","loading","setLoading","error","setError","cancelToken","useRef","getData","get","current","token","res","data","useEffect","CancelToken","source","cancel","response","message","goBack","length","map","d","index","ch_title","ch_dateadd","ch_id"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport axios from 'axios'\r\nimport { CardDeck, Card, Spinner, Button } from 'react-bootstrap'\r\n\r\nconst DetailPage = () => {\r\n\r\n    const {id, title} = useParams()\r\n    const history = useHistory()\r\n    const [detail, setDetail] = React.useState([])\r\n    const [loading, setLoading] = React.useState(false)\r\n    const [error, setError] = React.useState(null)\r\n    const cancelToken = React.useRef(null)\r\n\r\n    const getData = async (id) => {\r\n        try {\r\n            setLoading(true)\r\n            const res = await axios.get('https://api.codingthailand.com/api/course/' + id ,{\r\n                cancelToken: cancelToken.current.token  \r\n            })\r\n            setDetail(res.data.data)\r\n        } catch (error){\r\n            // console.log(error)\r\n            setError(error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n\r\n        cancelToken.current = axios.CancelToken.source()\r\n        getData(id)\r\n\r\n        return () =>  {\r\n            // console.log('exit')\r\n            cancelToken.current.cancel()\r\n        }\r\n\r\n    },[id])\r\n\r\n    if(loading === true){\r\n        return(\r\n            <div className=\"text-center mt-5\">\r\n                <Spinner animation=\"border\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"text-center mt-5\">\r\n                <p>Have a problem from server,please try again.</p>\r\n                <p>{error.response.data.message}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row mt-5\">\r\n                <div className=\"col-md-12\">\r\n                    <Button variant=\"secondary\" onClick={() => {\r\n                        history.goBack()\r\n                    }}>Back</Button>\r\n          \r\n                    <h2>\r\n                        {title} - {id}\r\n                    </h2>\r\n\r\n                    <div className=\"row mt-4\">\r\n                        {\r\n                            detail.length > 0 ? (\r\n                                <CardDeck>\r\n                                    {\r\n                                        detail.map((d, index) => {\r\n                                            return (\r\n                                                <div className=\"col-md-4\" key={d.ch_id}>\r\n                                                    <Card className=\"mb-4 shadow-sm\">\r\n                                                        <Card.Body>\r\n                                                            <Card.Title>{d.ch_title}</Card.Title>\r\n                                                            <Card.Text>\r\n                                                                {d.ch_dateadd}\r\n                                                            </Card.Text>\r\n                                                        </Card.Body>\r\n                                                    </Card>\r\n                                                </div>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </CardDeck>\r\n                            ) : (\r\n                                <div className=\"mx-auto\">Not found data ...</div>\r\n                            )\r\n                        }\r\n                    </div>\r\n                    <hr />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DetailPage\r\n"]},"metadata":{},"sourceType":"module"}