{"ast":null,"code":"var _jsxFileName = \"D:\\\\reactPractice\\\\create_react_app\\\\my-app\\\\src\\\\pages\\\\category\\\\EditPage.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { Container, Form, Button, Row, Col } from 'react-bootstrap';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  newsCatename: yup.string().required('Name news category is required!')\n});\n\nconst EditPage = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const history = useHistory(); // const getData = async (id) => {\n  //     try{\n  //         const res = await axios.get('https://api.codingthailand.com/api/category/' + id)\n  //         setValue('newsCatename', res.data.name)\n  //         setValue('newsCateId', res.data.id)\n  //     }catch(error) {\n  //         console.log(error)\n  //     }\n  // }\n  // React.useEffect(() => { \n  //     getData(id)\n  // },[id])\n  //useCallback\n\n  const getData = React.useCallback(async () => {\n    try {\n      const res = await axios.get('https://api.codingthailand.com/api/category/' + id); // setValue('newsCatename', res.data.name)\n      // setValue('newsCateId', res.data.id)\n    } catch (error) {\n      console.log(error);\n    }\n  }, [id, setValue]);\n  React.useEffect(() => {\n    getData();\n  }, [getData]);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    setValue\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const onSubmit = async data => {\n    const apiUrl = 'https://api.codingthailand.com/api/category';\n    const res = await axios.put(apiUrl, {\n      id: data.newsCateId,\n      name: data.newsCatename\n    });\n    alert(res.data.message);\n    history.replace('/category');\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        xs: 12,\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"newsCatename\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"News Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              ...register(\"newsCatename\"),\n              placeholder: \"Enter news category name.\",\n              isInvalid: errors.newsCatename\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 29\n            }, this), errors.newsCatename && /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n              type: \"invalid\",\n              children: errors.newsCatename.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"newsCateId\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"hidden\",\n              ...register(\"newsCateId\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            type: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditPage, \"dRe8heGnGvRqMKi8Qb+RusqHDu4=\", false, function () {\n  return [useParams, useHistory, useForm];\n});\n\n_c = EditPage;\nexport default EditPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditPage\");","map":{"version":3,"sources":["D:/reactPractice/create_react_app/my-app/src/pages/category/EditPage.js"],"names":["React","useParams","axios","Container","Form","Button","Row","Col","useForm","yupResolver","yup","useHistory","schema","object","shape","newsCatename","string","required","EditPage","id","history","getData","useCallback","res","get","error","console","log","setValue","useEffect","register","handleSubmit","formState","errors","resolver","onSubmit","data","apiUrl","put","newsCateId","name","alert","message","replace"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { Container, Form, Button, Row, Col } from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from \"yup\";\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst schema = yup.object().shape({\r\n    newsCatename: yup.string().required('Name news category is required!')\r\n});\r\n\r\nconst EditPage = () => {\r\n\r\n    const { id } = useParams()\r\n    const history = useHistory()\r\n\r\n    // const getData = async (id) => {\r\n    //     try{\r\n    //         const res = await axios.get('https://api.codingthailand.com/api/category/' + id)\r\n    //         setValue('newsCatename', res.data.name)\r\n    //         setValue('newsCateId', res.data.id)\r\n    //     }catch(error) {\r\n    //         console.log(error)\r\n    //     }\r\n    // }\r\n\r\n    // React.useEffect(() => { \r\n    //     getData(id)\r\n    // },[id])\r\n\r\n    //useCallback\r\n    const getData = React.useCallback(async () => {\r\n        try{\r\n            const res = await axios.get('https://api.codingthailand.com/api/category/' + id)\r\n            // setValue('newsCatename', res.data.name)\r\n            // setValue('newsCateId', res.data.id)\r\n        }catch(error) {\r\n            console.log(error)\r\n        }\r\n    },[id, setValue]) \r\n\r\n    React.useEffect(() => { \r\n        getData()\r\n    },[getData])\r\n\r\n    const { register, handleSubmit, formState:{ errors }, setValue } = useForm({\r\n        resolver: yupResolver(schema)\r\n    });\r\n\r\n    const onSubmit = async (data) => {\r\n        const apiUrl = 'https://api.codingthailand.com/api/category'\r\n\r\n        const res = await axios.put(apiUrl,{\r\n            id: data.newsCateId,\r\n            name : data.newsCatename\r\n        })\r\n\r\n        alert(res.data.message)\r\n        history.replace('/category')\r\n    }\r\n\r\n    return (\r\n        <Container className=\"mt-4\">\r\n            <Row>\r\n                <Col xs={12} md={6}>\r\n                    <Form onSubmit={handleSubmit(onSubmit)}>\r\n                     \r\n                        <Form.Group controlId=\"newsCatename\">\r\n                            <Form.Label>News Category</Form.Label>\r\n                            <Form.Control \r\n                                type=\"text\" \r\n                                {...register(\"newsCatename\")} \r\n                                placeholder=\"Enter news category name.\" \r\n                                isInvalid={errors.newsCatename}\r\n                            />\r\n                            {\r\n                                errors.newsCatename && (\r\n                                    <Form.Control.Feedback type=\"invalid\">\r\n                                        {errors.newsCatename.message}\r\n                                    </Form.Control.Feedback>\r\n                                )\r\n                            }\r\n                        </Form.Group>\r\n\r\n                        <Form.Group controlId=\"newsCateId\">\r\n                            <Form.Control \r\n                                type=\"hidden\" \r\n                                {...register(\"newsCateId\")} \r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Button variant=\"primary\" type=\"submit\">\r\n                            Submit\r\n                        </Button>\r\n\r\n                    </Form>\r\n                </Col>\r\n            </Row>\r\n            <hr />\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default EditPage\r\n"]},"metadata":{},"sourceType":"module"}