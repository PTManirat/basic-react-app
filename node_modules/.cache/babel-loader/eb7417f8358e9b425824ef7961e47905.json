{"ast":null,"code":"import React from\"react\";import{Navbar,Nav,NavDropdown,Button}from'react-bootstrap';import{NavLink,useHistory}from'react-router-dom';// import { UserStoreContext } from '../context/UserContext'\nimport{useSelector,useDispatch}from'react-redux';import{updateProfile}from'../redux/actions/authAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NavBar=function NavBar(){var history=useHistory();// const [profile, setProfile] = React.useState(null)\n// const userStore = React.useContext(UserStoreContext)\n//redux\nvar profileRedux=useSelector(function(state){return state.authReducer.profile;});var dispatch=useDispatch();var cartRedux=useSelector(function(state){return state.cartReducer.total;});// <-------------------- context section ------------------------>\n// const getProfile = () => {\n//   const profileVal = JSON.parse(localStorage.getItem('profile')) \n//   // if(profileVal){\n//   //   setProfile(profileVal)\n//   // }\n//   //update data from localStorage to context\n//   if(profileVal){\n//     userStore.updateProfile(profileVal)\n//   }\n// } \n// React.useEffect(() => {\n//   getProfile()\n//   // eslint-disable-next-line react-hooks/exhaustive-deps\n// },[])\n// <-------------------- context section ------------------------>\n// <-------------------- Redux section ------------------------>\nvar getProfile=function getProfile(){var profileVal=JSON.parse(localStorage.getItem('profile'));if(profileVal){dispatch(updateProfile(profileVal));}};React.useEffect(function(){getProfile();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// <-------------------- Redux section ------------------------>\nvar logout=function logout(){localStorage.removeItem('token');localStorage.removeItem('profile');history.replace('/');// history.go(0)\n// userStore.updateProfile(null)\ndispatch(updateProfile(null));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Navbar,{bg:\"warning\",expand:\"lg\",children:[/*#__PURE__*/_jsx(Navbar,{children:/*#__PURE__*/_jsxs(NavLink,{className:\"navbar-brand\",to:\"/\",exact:true,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"WebTestLogo\",src:\"/logo192.png\",width:\"30\",height:\"30\",className:\"d-inline-block align-top\"}),' ',\"Web Test\"]})}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsxs(Navbar.Collapse,{id:\"basic-navbar-nav\",children:[/*#__PURE__*/_jsxs(Nav,{className:\"mr-auto\",children:[/*#__PURE__*/_jsx(NavLink,{className:\"nav-link\",to:\"/\",activeClassName:\"active\",exact:true,children:\"Home\"}),/*#__PURE__*/_jsx(NavLink,{className:\"nav-link\",to:\"/product\",activeClassName:\"active\",children:\"Products\"}),/*#__PURE__*/_jsx(NavLink,{className:\"nav-link\",to:\"/about\",activeClassName:\"active\",children:\"About\"}),/*#__PURE__*/_jsxs(NavLink,{className:\"nav-link\",to:\"/cart\",activeClassName:\"active\",children:[\"Shopping Cart \",cartRedux&&cartRedux,\" items\"]}),/*#__PURE__*/_jsxs(NavDropdown,{title:\"Workshop (Pagination + CRUD)\",id:\"basic-nav-dropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:function onClick(){history.replace('/hospital');},children:\"Hospital Detail (Pagination)\"}),/*#__PURE__*/_jsx(NavDropdown.Divider,{}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:function onClick(){history.replace('/category');},children:\"News Category (CRUD)\"})]}),/*#__PURE__*/_jsx(NavLink,{className:\"nav-link\",to:\"/upload\",activeClassName:\"active\",children:\"Upload\"}),/*#__PURE__*/_jsx(NavLink,{className:\"nav-link\",to:\"/member\",activeClassName:\"active\",children:\"Member\"}),/*#__PURE__*/_jsx(NavLink,{className:\"nav-link\",to:\"/chart\",activeClassName:\"active\",children:\"Chart Report\"})]}),profileRedux?/*#__PURE__*/_jsxs(\"span\",{className:\"navbar-text\",children:[\"Welcome : \",profileRedux.name,/*#__PURE__*/_jsx(Button,{className:\"ml-2\",variant:\"outline-danger\",onClick:logout,children:\"Log Out\"})]}):/*#__PURE__*/_jsxs(Nav,{children:[/*#__PURE__*/_jsx(NavLink,{className:\"nav-link\",to:\"/register\",activeClassName:\"active\",children:\"Register\"}),/*#__PURE__*/_jsx(NavLink,{className:\"nav-link\",to:\"/login\",activeClassName:\"active\",children:\"Log In\"})]})]})]})});};export default NavBar;","map":{"version":3,"sources":["D:/reactPractice/create_react_app/my-app/src/components/NavBar.js"],"names":["React","Navbar","Nav","NavDropdown","Button","NavLink","useHistory","useSelector","useDispatch","updateProfile","NavBar","history","profileRedux","state","authReducer","profile","dispatch","cartRedux","cartReducer","total","getProfile","profileVal","JSON","parse","localStorage","getItem","useEffect","logout","removeItem","replace","name"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { Navbar, Nav, NavDropdown, Button } from 'react-bootstrap'\r\nimport { NavLink, useHistory } from 'react-router-dom'\r\n// import { UserStoreContext } from '../context/UserContext'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { updateProfile } from '../redux/actions/authAction'\r\n\r\nconst NavBar = () => {\r\n\r\n  const history = useHistory()\r\n  // const [profile, setProfile] = React.useState(null)\r\n  // const userStore = React.useContext(UserStoreContext)\r\n\r\n  //redux\r\n  const profileRedux = useSelector((state) => state.authReducer.profile)\r\n  const dispatch = useDispatch()\r\n  const cartRedux = useSelector((state) => state.cartReducer.total)\r\n  // <-------------------- context section ------------------------>\r\n  // const getProfile = () => {\r\n\r\n  //   const profileVal = JSON.parse(localStorage.getItem('profile')) \r\n\r\n  //   // if(profileVal){\r\n  //   //   setProfile(profileVal)\r\n  //   // }\r\n\r\n  //   //update data from localStorage to context\r\n  //   if(profileVal){\r\n  //     userStore.updateProfile(profileVal)\r\n  //   }\r\n\r\n  // } \r\n\r\n  // React.useEffect(() => {\r\n  //   getProfile()\r\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  // },[])\r\n  // <-------------------- context section ------------------------>\r\n\r\n  // <-------------------- Redux section ------------------------>\r\n    const getProfile = () => {\r\n\r\n      const profileVal = JSON.parse(localStorage.getItem('profile')) \r\n\r\n      if(profileVal){\r\n        dispatch(updateProfile(profileVal))\r\n      }\r\n\r\n    } \r\n\r\n    React.useEffect(() => {\r\n      getProfile()\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[])\r\n  // <-------------------- Redux section ------------------------>\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('token')\r\n    localStorage.removeItem('profile')\r\n    history.replace('/')\r\n    // history.go(0)\r\n    // userStore.updateProfile(null)\r\n    dispatch(updateProfile(null))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navbar bg=\"warning\" expand=\"lg\">\r\n        <Navbar>\r\n          <NavLink className='navbar-brand' to='/' exact>\r\n            <img\r\n                alt=\"WebTestLogo\"\r\n                src=\"/logo192.png\"\r\n                width=\"30\"\r\n                height=\"30\"\r\n                className=\"d-inline-block align-top\"\r\n              />{' '}\r\n              Web Test\r\n          </NavLink>\r\n          {/* <Navbar.Brand href=\"#home\">\r\n            <img\r\n              alt=\"WebTestLogo\"\r\n              src=\"/logo192.png\"\r\n              width=\"30\"\r\n              height=\"30\"\r\n              className=\"d-inline-block align-top\"\r\n            />{' '}\r\n            Web Test\r\n          </Navbar.Brand> */}\r\n        </Navbar>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"mr-auto\">\r\n            <NavLink className='nav-link' to='/' activeClassName='active' exact>\r\n              Home\r\n            </NavLink>\r\n\r\n            <NavLink className='nav-link' to='/product' activeClassName='active'>\r\n              Products\r\n            </NavLink>\r\n            \r\n            <NavLink className='nav-link' to='/about' activeClassName='active'>\r\n              About\r\n            </NavLink>\r\n\r\n            <NavLink className='nav-link' to='/cart' activeClassName='active'>\r\n              Shopping Cart { cartRedux && cartRedux } items\r\n            </NavLink>\r\n\r\n            <NavDropdown title=\"Workshop (Pagination + CRUD)\" id=\"basic-nav-dropdown\">\r\n\r\n              <NavDropdown.Item \r\n                onClick={() => {\r\n                  history.replace('/hospital')\r\n                }}\r\n              >\r\n                Hospital Detail (Pagination)\r\n              </NavDropdown.Item>\r\n\r\n              <NavDropdown.Divider />\r\n\r\n              <NavDropdown.Item \r\n                onClick={() => {\r\n                  history.replace('/category')\r\n                }}\r\n              >\r\n                News Category (CRUD)\r\n              </NavDropdown.Item>\r\n\r\n            </NavDropdown>\r\n\r\n            <NavLink className='nav-link' to='/upload' activeClassName='active'>\r\n              Upload\r\n            </NavLink>\r\n\r\n            <NavLink className='nav-link' to='/member' activeClassName='active'>\r\n              Member\r\n            </NavLink>\r\n\r\n            <NavLink className='nav-link' to='/chart' activeClassName='active'>\r\n              Chart Report\r\n            </NavLink>\r\n          </Nav>\r\n\r\n          {/* use context */}\r\n          {/* {\r\n            userStore.profile ? (\r\n              <span className=\"navbar-text\">\r\n                Welcome : {userStore.profile.name}\r\n                <Button className=\"ml-2\" variant=\"outline-danger\" onClick={logout}>\r\n                  Log Out\r\n                </Button>\r\n              </span>\r\n            ) : (\r\n              <Nav>\r\n                <NavLink className='nav-link' to='/register' activeClassName='active'>\r\n                  Register\r\n                </NavLink>\r\n                <NavLink className='nav-link' to='/login' activeClassName='active'>\r\n                  Log In\r\n                </NavLink>\r\n              </Nav>\r\n            )\r\n          } */}\r\n\r\n          {\r\n            profileRedux ? (\r\n              <span className=\"navbar-text\">\r\n                Welcome : {profileRedux.name}\r\n                <Button className=\"ml-2\" variant=\"outline-danger\" onClick={logout}>\r\n                  Log Out\r\n                </Button>\r\n              </span>\r\n            ) : (\r\n              <Nav>\r\n                <NavLink className='nav-link' to='/register' activeClassName='active'>\r\n                  Register\r\n                </NavLink>\r\n                <NavLink className='nav-link' to='/login' activeClassName='active'>\r\n                  Log In\r\n                </NavLink>\r\n              </Nav>\r\n            )\r\n          }\r\n\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n"]},"metadata":{},"sourceType":"module"}